
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">
<polymer-element name="five-star-comment" attributes="url label refId">
  <template>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    
    <core-ajax
      auto
      url="http://{{url}}/api/fiveStar/{{label}}/{{refId}}"
      handleAs="json"
      on-core-response="{{getElement}}"></core-ajax>

    <core-ajax
      url="http://{{url}}/api/fiveStar/{{label}}/{{refId}}"
      handleAs="json"
      method="POST"
      params="{{comment}}"
      on-core-response="{{getElement}}"></core-ajax>

    <div align="center">

      <form>
        <template repeat="{{c in comments}}">
          <template if="{{c.authorEmail}}">Email:</template>
          <template if="{{c.authorEmail}}">{{c.authorEmail}}</template>
          <div>Testo:</div>
          <div>{{c.text}}</div>
        </template>
        <div class="form-group">
          <label for="exampleInputEmail1">Email address</label><br>
          <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email" value="{{comment.email}}"><br>

          <textarea class="form-control" rows="10" with="5000" value="{{comment.text}}" >New</textarea>
          <a type="submit" class="btn btn-default" on-click="{{sendComment}}">Submit</a>
        </div>
      </form>
    </div>
    
  </template>
  <script>
    (function () {
      Polymer({
        ready: function() {
                console.log('Ciao Sono Polymer!');
                console.log(this);
              },
        comment: {email : 'a@example.it', text : 'Inserisci il tuo testo'},
        sendComment: function(){
          console.log(this.comment);
        },
        getElement: function(res){
          this.comments = res.detail.response.comments;
          console.log(res.detail.response.comments);
        }
      });
    })();
  </script>
</polymer-element>

    
    
    

